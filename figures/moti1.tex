% This file was created with tikzplotlib v0.10.1.
\begin{tikzpicture}

\definecolor{chocolate213940}{RGB}{213,94,0}
\definecolor{cornflowerblue93173226}{RGB}{93,173,226}
\definecolor{darkgray176}{RGB}{176,176,176}
\definecolor{darkgreen}{RGB}{0,100,0}
\definecolor{darkslateblue10661154}{RGB}{106,61,154}
\definecolor{gold}{RGB}{255,215,0}

\begin{groupplot}[group style={group size=2 by 1}]
\nextgroupplot[
legend cell align={left},
legend columns=3,
legend style={
  fill opacity=0.8,
  draw opacity=1,
  text opacity=1,
  at={(0.5,1.05)},
  anchor=north,
  draw=none
},
tick align=outside,
tick pos=left,
title={(a) Prefill vs Decode vs Chunked Prefill},
x grid style={darkgray176},
xmin=-0.5125, xmax=2.5125,
xtick style={color=black},
xtick={0,1,2},
xticklabels={Qwen2-beta-7B,OPT-13B,LLaMA-13B},
y grid style={darkgray176},
ylabel={Ratio of Latency to SLO.},
ymin=0, ymax=7.8015,
ytick style={color=black}
]
\draw[draw=none,fill=cornflowerblue93173226] (axis cs:-0.375,0) rectangle (axis cs:-0.125,1.33);
\addlegendimage{ybar,ybar legend,draw=none,fill=cornflowerblue93173226}
\addlegendentry{Prefill}

\draw[draw=none,fill=cornflowerblue93173226] (axis cs:0.625,0) rectangle (axis cs:0.875,1.2);
\draw[draw=none,fill=cornflowerblue93173226] (axis cs:1.625,0) rectangle (axis cs:1.875,1.59);
\draw[draw=gold,fill=white,postaction={pattern=north east lines, pattern color=gold}] (axis cs:-0.125,0) rectangle (axis cs:0.125,7.43);
\addlegendimage{ybar,ybar legend,draw=gold,fill=white,postaction={pattern=north east lines, pattern color=gold}}
\addlegendentry{Decode}

\draw[draw=gold,fill=white,postaction={pattern=north east lines, pattern color=gold}] (axis cs:0.875,0) rectangle (axis cs:1.125,6.8);
\draw[draw=gold,fill=white,postaction={pattern=north east lines, pattern color=gold}] (axis cs:1.875,0) rectangle (axis cs:2.125,7.06);
\draw[draw=darkgreen,fill=white,postaction={pattern=vertical lines, pattern color=darkgreen}] (axis cs:0.125,0) rectangle (axis cs:0.375,0.88);
\addlegendimage{ybar,ybar legend,draw=darkgreen,fill=white,postaction={pattern=vertical lines, pattern color=darkgreen}}
\addlegendentry{Chunked Prefill}

\draw[draw=darkgreen,fill=white,postaction={pattern=vertical lines, pattern color=darkgreen}] (axis cs:1.125,0) rectangle (axis cs:1.375,0.95);
\draw[draw=darkgreen,fill=white,postaction={pattern=vertical lines, pattern color=darkgreen}] (axis cs:2.125,0) rectangle (axis cs:2.375,1.01);

\nextgroupplot[
legend cell align={left},
legend columns=2,
legend style={
  fill opacity=0.8,
  draw opacity=1,
  text opacity=1,
  at={(0.5,1.05)},
  anchor=north,
  draw=none
},
tick align=outside,
tick pos=left,
title={(b) Compute vs Transfer},
x grid style={darkgray176},
xmin=-0.32, xmax=2.32,
xtick style={color=black},
xtick={0,1,2},
xticklabels={Prefill,Decode,Chunked Prefill},
y grid style={darkgray176},
ylabel={Latency (ms)},
ymin=0, ymax=19.0344,
ytick style={color=black}
]
\draw[draw=none,fill=chocolate213940] (axis cs:-0.2,0) rectangle (axis cs:0,5.268);
\addlegendimage{ybar,ybar legend,draw=none,fill=chocolate213940}
\addlegendentry{Compute}

\draw[draw=none,fill=chocolate213940] (axis cs:0.8,0) rectangle (axis cs:1,1.312);
\draw[draw=none,fill=chocolate213940] (axis cs:1.8,0) rectangle (axis cs:2,0.974);
\draw[draw=darkslateblue10661154,fill=white,postaction={pattern=crosshatch, pattern color=darkslateblue10661154}] (axis cs:-1.38777878078145e-17,0) rectangle (axis cs:0.2,18.128);
\addlegendimage{ybar,ybar legend,draw=darkslateblue10661154,fill=white,postaction={pattern=crosshatch, pattern color=darkslateblue10661154}}
\addlegendentry{Transfer}

\draw[draw=darkslateblue10661154,fill=white,postaction={pattern=crosshatch, pattern color=darkslateblue10661154}] (axis cs:1,0) rectangle (axis cs:1.2,18.128);
\draw[draw=darkslateblue10661154,fill=white,postaction={pattern=crosshatch, pattern color=darkslateblue10661154}] (axis cs:2,0) rectangle (axis cs:2.2,18.128);
\end{groupplot}

\end{tikzpicture}
