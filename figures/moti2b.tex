% This file was created with tikzplotlib v0.10.1.
\begin{tikzpicture}

\definecolor{chocolate213940}{RGB}{213,94,0}
\definecolor{cornflowerblue93173226}{RGB}{93,173,226}
\definecolor{darkgray176}{RGB}{176,176,176}
\definecolor{gold}{RGB}{255,215,0}
\definecolor{lightgray204}{RGB}{204,204,204}
\definecolor{mediumvioletred16632106}{RGB}{166,32,106}

\begin{groupplot}[group style={group size=2 by 1}]
\nextgroupplot[
legend cell align={left},
legend style={
  fill opacity=0.8,
  draw opacity=1,
  text opacity=1,
  at={(0.03,0.97)},
  anchor=north west,
  draw=lightgray204
},
tick align=outside,
tick pos=left,
title={(a) Memory Usage on Offloading Devices},
x grid style={darkgray176},
xlabel={Batch Size},
xmin=-0.53, xmax=4.53,
xtick style={color=black},
xtick={0,1,2,3,4},
xticklabels={4,8,16,32,64},
y grid style={darkgray176},
ylabel={Memory Usage (GB)},
ymin=0, ymax=14.49,
ytick style={color=black}
]
\draw[draw=none,fill=cornflowerblue93173226] (axis cs:-0.3,0) rectangle (axis cs:0,6.1);
\addlegendimage{ybar,ybar legend,draw=none,fill=cornflowerblue93173226}
\addlegendentry{NovaServe}

\draw[draw=none,fill=cornflowerblue93173226] (axis cs:0.7,0) rectangle (axis cs:1,7.77);
\draw[draw=none,fill=cornflowerblue93173226] (axis cs:1.7,0) rectangle (axis cs:2,9.5);
\draw[draw=none,fill=cornflowerblue93173226] (axis cs:2.7,0) rectangle (axis cs:3,11.97);
\draw[draw=none,fill=cornflowerblue93173226] (axis cs:3.7,0) rectangle (axis cs:4,13.8);
\draw[draw=gold,fill=white,postaction={pattern=crosshatch, pattern color=gold}] (axis cs:2.77555756156289e-17,0) rectangle (axis cs:0.3,3.5);
\addlegendimage{ybar,ybar legend,draw=gold,fill=white,postaction={pattern=crosshatch, pattern color=gold}}
\addlegendentry{FlexGen}

\draw[draw=gold,fill=white,postaction={pattern=crosshatch, pattern color=gold}] (axis cs:1,0) rectangle (axis cs:1.3,4.8);
\draw[draw=gold,fill=white,postaction={pattern=crosshatch, pattern color=gold}] (axis cs:2,0) rectangle (axis cs:2.3,5.1);
\draw[draw=gold,fill=white,postaction={pattern=crosshatch, pattern color=gold}] (axis cs:3,0) rectangle (axis cs:3.3,5.57);
\draw[draw=gold,fill=white,postaction={pattern=crosshatch, pattern color=gold}] (axis cs:4,0) rectangle (axis cs:4.3,6.2);
\draw (axis cs:-0.2,6.3) node[
  scale=0.5,
  anchor=base,
  text=black,
  rotate=0.0
]{6.10};
\draw (axis cs:0.8,7.97) node[
  scale=0.5,
  anchor=base,
  text=black,
  rotate=0.0
]{7.77};
\draw (axis cs:1.8,9.7) node[
  scale=0.5,
  anchor=base,
  text=black,
  rotate=0.0
]{9.50};
\draw (axis cs:2.8,12.17) node[
  scale=0.5,
  anchor=base,
  text=black,
  rotate=0.0
]{11.97};
\draw (axis cs:3.8,14) node[
  scale=0.5,
  anchor=base,
  text=black,
  rotate=0.0
]{13.80};
\draw (axis cs:0.2,3.7) node[
  scale=0.5,
  anchor=base,
  text=black,
  rotate=0.0
]{3.50};
\draw (axis cs:1.2,5) node[
  scale=0.5,
  anchor=base,
  text=black,
  rotate=0.0
]{4.80};
\draw (axis cs:2.2,5.3) node[
  scale=0.5,
  anchor=base,
  text=black,
  rotate=0.0
]{5.10};
\draw (axis cs:3.2,5.77) node[
  scale=0.5,
  anchor=base,
  text=black,
  rotate=0.0
]{5.57};
\draw (axis cs:4.2,6.4) node[
  scale=0.5,
  anchor=base,
  text=black,
  rotate=0.0
]{6.20};

\nextgroupplot[
legend cell align={left},
legend style={
  fill opacity=0.8,
  draw opacity=1,
  text opacity=1,
  at={(0.03,0.97)},
  anchor=north west,
  draw=lightgray204
},
tick align=outside,
tick pos=left,
title={(b) Throughput Comparison},
x grid style={darkgray176},
xlabel={Batch Size},
xmin=-0.53, xmax=4.53,
xtick style={color=black},
xtick={0,1,2,3,4},
xticklabels={4,8,16,32,64},
y grid style={darkgray176},
ylabel={Throughput (tokens/s)},
ymin=0, ymax=76.125,
ytick style={color=black}
]
\draw[draw=none,fill=chocolate213940] (axis cs:-0.3,0) rectangle (axis cs:0,15.2);
\draw[draw=none,fill=chocolate213940] (axis cs:0.7,0) rectangle (axis cs:1,21.97);
\draw[draw=none,fill=chocolate213940] (axis cs:1.7,0) rectangle (axis cs:2,39.6);
\draw[draw=none,fill=chocolate213940] (axis cs:2.7,0) rectangle (axis cs:3,57.14);
\draw[draw=none,fill=chocolate213940] (axis cs:3.7,0) rectangle (axis cs:4,72.5);
\draw[draw=mediumvioletred16632106,fill=white,postaction={pattern=north east lines, pattern color=mediumvioletred16632106}] (axis cs:2.77555756156289e-17,0) rectangle (axis cs:0.3,6.8);
\draw[draw=mediumvioletred16632106,fill=white,postaction={pattern=north east lines, pattern color=mediumvioletred16632106}] (axis cs:1,0) rectangle (axis cs:1.3,11.85);
\draw[draw=mediumvioletred16632106,fill=white,postaction={pattern=north east lines, pattern color=mediumvioletred16632106}] (axis cs:2,0) rectangle (axis cs:2.3,28.3);
\draw[draw=mediumvioletred16632106,fill=white,postaction={pattern=north east lines, pattern color=mediumvioletred16632106}] (axis cs:3,0) rectangle (axis cs:3.3,35.46);
\draw[draw=mediumvioletred16632106,fill=white,postaction={pattern=north east lines, pattern color=mediumvioletred16632106}] (axis cs:4,0) rectangle (axis cs:4.3,45.7);
\draw (axis cs:-0.2,17.2) node[
  scale=0.5,
  anchor=base,
  text=black,
  rotate=0.0
]{15.20};
\draw (axis cs:0.8,23.97) node[
  scale=0.5,
  anchor=base,
  text=black,
  rotate=0.0
]{21.97};
\draw (axis cs:1.8,41.6) node[
  scale=0.5,
  anchor=base,
  text=black,
  rotate=0.0
]{39.60};
\draw (axis cs:2.8,59.14) node[
  scale=0.5,
  anchor=base,
  text=black,
  rotate=0.0
]{57.14};
\draw (axis cs:3.8,74.5) node[
  scale=0.5,
  anchor=base,
  text=black,
  rotate=0.0
]{72.50};
\draw (axis cs:0.2,8.8) node[
  scale=0.5,
  anchor=base,
  text=black,
  rotate=0.0
]{6.80};
\draw (axis cs:1.2,13.85) node[
  scale=0.5,
  anchor=base,
  text=black,
  rotate=0.0
]{11.85};
\draw (axis cs:2.2,30.3) node[
  scale=0.5,
  anchor=base,
  text=black,
  rotate=0.0
]{28.30};
\draw (axis cs:3.2,37.46) node[
  scale=0.5,
  anchor=base,
  text=black,
  rotate=0.0
]{35.46};
\draw (axis cs:4.2,47.7) node[
  scale=0.5,
  anchor=base,
  text=black,
  rotate=0.0
]{45.70};
\end{groupplot}

\end{tikzpicture}
